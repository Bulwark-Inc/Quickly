<header
  class="w-full top-0 left-0 z-50 transition-all duration-300"
  x-data="{ open: false, scrolled: false, userMenu: false }"
  @scroll.window="scrolled = (window.scrollY > 0)"
  :class="{
    'sticky bg-white dark:bg-gray-900 shadow-md text-gray-900 dark:text-gray-100': scrolled,
    'absolute bg-transparent text-white': !scrolled
  }"
>
  <div class="w-full px-6 py-4 flex justify-between items-center">

    <a href="{% url 'home' %}" class="text-2xl font-bold">Quickly</a>

    <nav class="hidden md:flex space-x-8 font-medium">
      <a href="{% url 'home' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition">Home</a>
      <a href="{% url 'about' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition">About</a>
      <a href="{% url 'contact' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition">Contact</a>

      <button data-toggle-dark title="Toggle Dark Mode"
              class="hidden md:inline-flex items-center justify-center text-xl hover:text-blue-500 dark:hover:text-blue-400 transition">
        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
        <i data-lucide="sun" class="w-5 h-5 hidden dark:inline-block"></i>
      </button>
    </nav>

    <div class="relative hidden md:block">
      <button @click="userMenu = !userMenu" class="text-2xl focus:outline-none text-current">
        <i data-lucide="user" class="w-6 h-6 text-current"></i>
      </button>

      <div x-show="userMenu"
           @click.away="userMenu = false"
           x-transition
           class="absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-md shadow-lg py-2 z-50"
      >
        {% if user.is_authenticated %}
          <a href="/dashboard/" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Dashboard</a>
          <a href="{% url 'submit_payment' %}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Payment</a>
          <a href="{% url 'logout' %}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Login</a>
          <a href="{% url 'register' %}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Register</a>
        {% endif %}
      </div>
    </div>

    <button @click="open = !open" class="md:hidden text-2xl focus:outline-none z-50 text-current">
      <i data-lucide="menu" class="h-7 w-7 text-current"></i>
    </button>
  </div>

  <div x-show="open"
       x-transition:enter="transition transform duration-300"
       x-transition:enter-start="translate-x-full opacity-0"
       x-transition:enter-end="translate-x-0 opacity-100"
       x-transition:leave="transition transform duration-200"
       x-transition:leave-start="translate-x-0 opacity-100"
       x-transition:leave-end="translate-x-full opacity-0"
       class="md:hidden fixed top-0 right-0 h-full w-64 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg py-6 px-6 z-40 space-y-6 overflow-y-auto"
  >
    <div class="flex justify-between items-center mb-4">
      <span class="text-xl font-semibold">Menu</span>
      <button @click="open = false" class="text-gray-600 dark:text-gray-300 focus:outline-none">
        <i data-lucide="x" class="h-6 w-6"></i>
      </button>
    </div>

    <a href="{% url 'home' %}" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">Home</a>
    <a href="{% url 'about' %}" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">About</a>
    <a href="{% url 'contact' %}" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">Contact</a>

    <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
      {% if user.is_authenticated %}
        <a href="/dashboard/" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">Dashboard</a>
        <a href="{% url 'submit_payment' %}" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">Payment</a>
        <a href="{% url 'logout' %}" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">Logout</a>
      {% else %}
        <a href="{% url 'login' %}" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">Login</a>
        <a href="{% url 'register' %}" class="block px-2 py-2 hover:text-blue-600 dark:hover:text-blue-400 transition">Register</a>
      {% endif %}
    </div>

    <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
      <button data-toggle-dark
              class="flex items-center space-x-2 px-2 py-2 text-sm hover:text-blue-600 dark:hover:text-blue-400 transition">
        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
        <i data-lucide="sun" class="w-5 h-5 hidden dark:inline-block"></i>
        <span>Toggle Dark Mode</span>
      </button>
    </div>
  </div>
</header>